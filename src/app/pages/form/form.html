<h2>Send us your feedback</h2>
<p class="small">We’ll only use your details to follow up on your message.</p>

<form [formGroup]="feedbackForm" (ngSubmit)="onSubmit()" novalidate class="form">
  <div class="field">
    <label for="name">Name</label>
    <input id="name" type="text" formControlName="name" placeholder="Jane Doe" />
    <div class="error" *ngIf="f.name.touched && f.name.invalid">
      <span *ngIf="f.name.errors?.['required']">Name is required.</span>
      <span *ngIf="f.name.errors?.['minlength']">At least 2 characters.</span>
    </div>
  </div>

  <div class="field">
    <label for="email">Email</label>
    <input id="email" type="email" formControlName="email" placeholder="jane.doe@example.ca" />
    <div class="error" *ngIf="f.email.touched && f.email.invalid">
      <span *ngIf="f.email.errors?.['required']">Email is required.</span>
      <span *ngIf="f.email.errors?.['email']">Enter a valid email address.</span>
    </div>
  </div>

  <div class="field">
    <label for="message">Message</label>
    <textarea id="message" rows="5" formControlName="message" placeholder="How can we help?"></textarea>
    <div class="error" *ngIf="f.message.touched && f.message.invalid">
      <span *ngIf="f.message.errors?.['required']">Message is required.</span>
      <span *ngIf="f.message.errors?.['minlength']">At least 10 characters.</span>
    </div>
  </div>

  <label class="checkbox">
    <input type="checkbox" formControlName="agree" />
    <span>I agree to be contacted about my feedback.</span>
  </label>
  <div class="error" *ngIf="f.agree.touched && f.agree.invalid">Please confirm before submitting.</div>

  <button type="submit" [disabled]="submitting">Submit</button>
  <span class="small" *ngIf="submitting">Sending…</span>
</form>

<div class="card success" *ngIf="submitted">
  <strong>Thanks!</strong> Your feedback was submitted.
</div>
<div class="card error" *ngIf="error">{{ error }}</div>
